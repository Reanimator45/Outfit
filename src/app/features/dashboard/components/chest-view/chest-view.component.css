/* =====================================
   CONTENEDOR PRINCIPAL
===================================== */
.chest-stage{
 position:relative;
 width:100%;
 height:360px;
 display:flex;
 flex-direction:column;
 justify-content:flex-end;
 align-items:center;
 overflow:visible;
}

/* =====================================
   ESCENA
===================================== */
.scene{
 position:relative;
 width:320px;
 height:260px;
 display:flex;
 justify-content:center;
 align-items:flex-end;
}

/* =====================================
   LINK (APARECE DESDE ABAJO)
===================================== */
.link{
 position:absolute;
 bottom:-260px;
 left:50%;
 transform:translateX(-50%);
 width:130px;
 opacity:0;
 transition:all .8s cubic-bezier(.22,.61,.36,1);
 z-index:8;
 pointer-events:none;
}

.link.show{
 bottom:95px;
 opacity:1;
}

/* =====================================
   COFRE
===================================== */
.chest{
 position:relative;
 width:190px;
 height:120px;
 z-index:5;
 filter:drop-shadow(0 10px 20px rgba(0,0,0,.6));
}

/* BASE */
.base{
 position:absolute;
 bottom:0;
 width:100%;
 height:75px;
 background:linear-gradient(180deg,#9a5c24,#5c3213);
 border:4px solid #2a1404;
 border-radius:10px;
 box-shadow:
 inset 0 0 10px rgba(0,0,0,.6),
 0 0 20px rgba(255,215,0,.2);
}

/* TAPA */
.lid{
 position:absolute;
 bottom:75px;
 width:100%;
 height:65px;
 background:linear-gradient(180deg,#c47b2e,#7a4417);
 border:4px solid #2a1404;
 border-bottom:none;
 border-radius:10px 10px 0 0;
 transform-origin:bottom center;
 transform:rotateX(0deg);
 transition:transform .6s ease;
 box-shadow:
 inset 0 0 10px rgba(0,0,0,.6),
 0 0 18px rgba(255,215,0,.25);
}

.chest.open .lid{
 transform:rotateX(-120deg);
}

/* BRILLO INTERIOR */
.chest.open::after{
 content:"";
 position:absolute;
 top:-10px;
 left:50%;
 transform:translateX(-50%);
 width:120px;
 height:60px;
 background:radial-gradient(circle,rgba(255,215,0,.7),transparent);
 filter:blur(10px);
 animation:glowPulse 1.2s infinite alternate;
}

@keyframes glowPulse{
 from{
  opacity:.5;
  transform:translateX(-50%) scale(.9);
 }
 to{
  opacity:1;
  transform:translateX(-50%) scale(1.1);
 }
}

/* =====================================
   PARTICULAS DORADAS
===================================== */
.particles{
 position:absolute;
 bottom:90px;
 left:50%;
 transform:translateX(-50%);
 width:200px;
 height:160px;
 pointer-events:none;
 z-index:7;
}

.particle{
 position:absolute;
 width:6px;
 height:6px;
 background:gold;
 border-radius:50%;
 opacity:0;
 animation:particleFloat 1.6s infinite ease-out;
}

.particle:nth-child(1){left:10%;animation-delay:.1s;}
.particle:nth-child(2){left:30%;animation-delay:.4s;}
.particle:nth-child(3){left:50%;animation-delay:.2s;}
.particle:nth-child(4){left:70%;animation-delay:.6s;}
.particle:nth-child(5){left:90%;animation-delay:.3s;}

@keyframes particleFloat{
 0%{
  transform:translateY(0) scale(.6);
  opacity:1;
 }
 100%{
  transform:translateY(-120px) scale(1.1);
  opacity:0;
 }
}

/* =====================================
   RESULTADO DORADO FLOTANTE
===================================== */
.result{
 position:absolute;
 top:15px;
 width:100%;
 text-align:center;
 font-size:24px;
 font-weight:bold;
 color:gold;
 z-index:9;
 text-shadow:
 0 0 10px rgba(255,215,0,.8),
 0 0 20px rgba(255,215,0,.5);
 animation:floatName 1.4s infinite alternate ease-in-out;
}

@keyframes floatName{
 from{transform:translateY(0);}
 to{transform:translateY(-12px);}
}

/* =====================================
   BOTON INVOCAR COFRE
===================================== */
.summon{
 margin-top:25px;
 padding:14px 36px;
 font-size:20px;
 font-weight:bold;
 letter-spacing:1px;
 color:white;
 background:linear-gradient(180deg,#ffd700,#c9a000);
 border:none;
 border-radius:8px;
 cursor:pointer;
 position:relative;
 overflow:hidden;
 box-shadow:
 0 0 20px rgba(255,215,0,.4),
 inset 0 -4px 0 rgba(0,0,0,.25);
 transition:all .15s ease;
}

.summon::before{
 content:"";
 position:absolute;
 top:0;
 left:-120%;
 width:120%;
 height:100%;
 background:linear-gradient(120deg,transparent,rgba(255,255,255,.4),transparent);
 transition:.4s;
}

.summon:hover::before{
 left:120%;
}

.summon:hover{
 transform:translateY(-2px) scale(1.05);
 box-shadow:
 0 0 30px rgba(255,215,0,.7),
 inset 0 -4px 0 rgba(0,0,0,.25);
}

.summon:active{
 transform:translateY(2px) scale(.97);
 box-shadow:
 0 0 10px rgba(255,215,0,.4),
 inset 0 4px 6px rgba(0,0,0,.4);
}
